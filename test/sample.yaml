apiVersion: jfvilas.at.outlook.com/v1
kind: ObkAuthorizator
metadata:
  name: ja-jfvilas
  namespace: dev
spec:
  config:
    replicas: 1
    prometheus: false
  ingress:
    name: ingress-jfvilas
    # NGINX Ingress
    # provider: nginx-ingress
    ##### class: nginx
    # Ingress Nginx
    # provider: ingress-nginx
    ##### class: nginx
    # Traefik
    provider: ingress-nginx
    class: nginx
  validators:
    - keycloak:
        name: testkc
        realm: testrealm
        url: http://keycloak.dev.svc.cluster.local:8080
    # - basic-auth-list:
    #     name: admins
    #     realm: demo
    #     users:
    #       - name: julio
    #         password: pepito1
    #       - name: lolo
    #         password: pepito2
    # - basic-auth-list:
    #     name: admins
    #     users:
    #       - name: julio
    #         password: pepito1
    #       - name: lolo
    #         password: pepito2
  ruleset:
    # unrestricted
    - uri: "/favicon.ico"
      uritype: "exact"
      type: "unrestricted"
    # unrestricted
    - uri: "/"
      uritype: "exact"
      type: "unrestricted"
    # valid
    - uri: "/validkc/"
      uritype: "prefix"
      type: "valid"
      validators: [ testkc ]
